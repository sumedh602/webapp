<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lumeo - Messaging App</title>

  <!-- External Stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Content-Security-Policy (CSP) -->
  <meta http-equiv="Content-Security-Policy" content="
  default-src 'self'; 
  script-src 'self' 'nonce-ABC123' https://apis.google.com https://www.gstatic.com https://accounts.google.com https://www.googleapis.com https://cdn.jsdelivr.net; 
  style-src 'self' 'unsafe-inline' https://accounts.google.com https://fonts.googleapis.com; 
  connect-src 'self' https://www.googleapis.com https://accounts.google.com; 
  img-src 'self' data: https://accounts.google.com https://www.gstatic.com; 
  font-src 'self' https://fonts.gstatic.com; 
  frame-src 'self' https://accounts.google.com;
  ">

  <!-- Cross-Origin-Opener-Policy (COOP) -->
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">

  <!-- JWT Decode Library -->
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js" nonce="ABC123"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js" nonce="ABC123"></script>
</head>
<body>
  <!-- Login Page -->
  <div id="loginPage">
    <header>
      <h1>Welcome to Lumeo</h1>
      <p>Your all-in-one communication platform</p>
    </header>
    <main>
      <div class="login-section">
        <div id="g_id_onload"
          data-client_id="591544758369-9hsitg0viq1juoej6shge4co9uunj86g.apps.googleusercontent.com"
          data-context="signin"
          data-ux_mode="popup"
          data-callback="handleCredentialResponse"
          data-auto_prompt="false">
        </div>
        <div class="g_id_signin" data-type="standard"></div>
      </div>
    </main>
  </div>

  <!-- Main App Page -->
  <div id="appPage" style="display: none;">
    <header>
      <h1>Lumeo</h1>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </header>

    <main class="app-container">
      <section class="contacts">
        <h2>Contacts</h2>
        <button id="addContactBtn" class="add-contact-btn">+ Add Contact</button>
        <ul id="contactsList"></ul>
      </section>

      <section class="chat">
        <h2>Chat</h2>
        <div class="chat-window" id="chatWindow"></div>
        <textarea id="messageInput" placeholder="Type a message..."></textarea>
        <button id="sendMessageBtn">Send</button>
      </section>

      <section class="media-sharing">
        <button id="sendAudioBtn">Audio</button>
        <button id="sendImageBtn">Image</button>
        <button id="sendEmojiBtn">Emoji</button>
      </section>

      <section class="calls">
        <button id="startVoiceCallBtn">Start Voice Call</button>
        <button id="startVideoCallBtn">Start Video Call</button>
      </section>
    </main>
  </div>

  <!-- Firebase Initialization -->
  <script nonce="ABC123">
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCV5tsnlE0UkFIHiuhQUi1ZRouP_p0Ffi4",
      authDomain: "lumeoapp.firebaseapp.com",
      projectId: "lumeoapp",
      storageBucket: "lumeoapp.firebasestorage.app",
      messagingSenderId: "591544758369",
      appId: "1:591544758369:web:a226173af1f62577113a20",
      measurementId: "G-DKSB2YH1BE"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
  </script>

  <!-- Custom JavaScript -->
  <script src="script.js"></script>
</body>
</html>
